<tr class="config-row"
    data-config-id="{{ config.id }}"
    data-update-url="{% url 'lab:update_config' config.id %}">
  <td class="cell-prueba">{{ config.prueba_id.nombre }}</td>
  <td class="cell-view cell-instrumento">{{ config.instrumento_id.nombre|default:"-" }}</td>
  <td class="cell-view cell-metodo">{{ config.metodo_analitico_id.nombre|default:"-" }}</td>
  <td class="cell-view cell-reactivo">{{ config.reactivo_id.nombre|default:"-" }}</td>
  <td class="cell-view cell-unidad">{{ config.unidad_de_medida_id.nombre|default:"-" }}</td>

  <td class="cell-edit d-none">
    <div class="row g-2">
      <div class="col">
        <select class="form-select sel-instrumento" name="instrumento_id">
          <option value="">Seleccionar</option>
          {% for inst in instrumentos %}
            <option value="{{ inst.id }}" {% if config.instrumento_id and config.instrumento_id.id == inst.id %}selected{% endif %}>{{ inst.nombre }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="col">
        <select class="form-select sel-metodo" name="metodo_analitico_id">
          <option value="">Seleccionar</option>
          {% for m in metodos %}
            <option value="{{ m.id }}" {% if config.metodo_analitico_id and config.metodo_analitico_id.id == m.id %}selected{% endif %}>{{ m.nombre }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="col">
        <select class="form-select sel-reactivo" name="reactivo_id">
          <option value="">Seleccionar</option>
          {% for r in reactivos %}
            <option value="{{ r.id }}" {% if config.reactivo_id and config.reactivo_id.id == r.id %}selected{% endif %}>{{ r.nombre }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="col">
        <select class="form-select sel-unidad" name="unidad_de_medida_id">
          <option value="">Seleccionar</option>
          {% for u in unidades %}
            <option value="{{ u.id }}" {% if config.unidad_de_medida_id and config.unidad_de_medida_id.id == u.id %}selected{% endif %}>{{ u.nombre }}</option>
          {% endfor %}
        </select>
      </div>
    </div>
  </td>

  <td class="cell-actions">
    {% if can_edit %}
      <button type="button"
              class="btn btn-primary btn-sm btn-raise btn-open-edit-modal"
              data-bs-toggle="modal"
              data-bs-target="#editConfigModal"
              data-config-id="{{ config.id }}"
              data-inst-id="{{ config.instrumento_id.id|default_if_none:'' }}"
              data-met-id="{{ config.metodo_analitico_id.id|default_if_none:'' }}"
              data-reac-id="{{ config.reactivo_id.id|default_if_none:'' }}"
              data-uni-id="{{ config.unidad_de_medida_id.id|default_if_none:'' }}">
        Editar
      </button>
    {% else %}
      <button class="btn btn-secondary btn-sm" disabled>Edici√≥n bloqueada</button>
    {% endif %}
  </td>
</tr>
